[tools]
python = "3.13.1"
"pipx:uv" = "0.9.21"
"pipx:ruff" = "0.14.7"
ollama = "0.13.5"

[tasks.lint]
description = "Run ruff linter"
run = "ruff check src tests"

[tasks.format]
description = "Format code with ruff"
run = "ruff format src tests"

[tasks."format:check"]
description = "Check code formatting"
run = "ruff format --check src tests"

[tasks.test]
description = "Run pytest"
run = "uv run pytest -v"

[tasks."test:cov"]
description = "Run pytest with coverage"
run = "uv run pytest --cov=src --cov-report=term-missing"

[tasks.check]
description = "Run all checks (format, lint, test)"
depends = ["format:check", "lint", "test"]

[tasks."ollama:start"]
description = "Start Ollama server in background"
run = "ollama serve > /dev/null 2>&1 &"

[tasks."ollama:stop"]
description = "Stop Ollama server"
run = "pkill -f 'ollama serve' || true"

[tasks."ollama:status"]
description = "Check if Ollama is running"
run = "pgrep -f 'ollama serve' && echo 'Ollama is running' || echo 'Ollama is not running'"
